 <!DOCTYPE html>
  <html data-require="math math-format polynomials">
      <head>
          <title>Descartes' rule of signs</title>
          <script src="../khan-exercise.js"></script>
          <script>
// Returns the number of times 0 is a root of the given polynomial.
function getZeroRootMultiplicity(p) {
  return p.findMinDegree();
}

// Given the polynomial p, computes the maximum number of positive
// roots it can have according to Descartes' rule of signs.
function getMaxPositiveRoots(p) {
  if (p.coefs.length == 0) {
    return 0;
  }
  var minDegree = p.findMinDegree();
  var maxDegree = p.findMaxDegree();
  var sign = (p.coefs[minDegree] > 0) ? +1 : -1;
  var signChanges = 0;
  for (var i = minDegree + 1; i <= maxDegree; ++i) {
    var ai = p.coefs[i];
    if (ai == 0) continue;
    var aSign = (ai > 0) ? +1 : -1;
    if (aSign != sign) {
      sign = aSign;
      ++signChanges;
    }
  }
  return signChanges;
}

// Given the polynomial p, returns the polynomial resulting from negating its
// variable.
function negateVariable(p, name) {
  // Flip the sign of odd-power terms.
  var coefs = p.coefs.slice();
  for (var i = 0; i < coefs.length; ++i) {
    if (i % 2 != 0) {
      coefs[i] *= -1;
    }
  }
  return new KhanUtil.Polynomial(p.minDegree, p.maxDegree, coefs, p.variable, name);
}

// Given the polynomial p and q = negateVariable(p), computes the minimum
// number of complex roots it can have according to Descartes' rule of signs.
function getMinComplexRoots(p, q) {
  return p.findMaxDegree() - getMaxPositiveRoots(p) - getMaxPositiveRoots(q) - getZeroRootMultiplicity(p);
}
          </script>
      </head>
      <body>
          <div class="exercise">
              <div class="vars">
                  <var id="X">randVar()</var>
                  <var id="MAX_DEGREE">randRange(2, 6)</var>
                  <var id="P">new Polynomial(0, MAX_DEGREE, null, X, "p")</var>
                  <var id="Q">negateVariable(P, "q")</var>
                  <var id="MAX_POSITIVE_ROOTS">getMaxPositiveRoots(P)</var>
                  <var id="MAX_NEGATIVE_ROOTS">getMaxPositiveRoots(Q)</var>
                  <var id="ZERO_ROOT_MULTIPLICITY">getZeroRootMultiplicity(P)</var>
                  <var id="MIN_COMPLEX_ROOTS">getMinComplexRoots(P, Q)</var>
              </div>

              <div class="problems">
                  <div id="max-positive-roots" data-weight="3">
                      <p class="problem">Let
                      <code>f(x) = <var>P</var></code>.</p>
                      <p class="question">What is the maximum number of positive roots <code>f(x)</code> can have?</p>
                      <p class="solution" data-type="text"><var>MAX_POSITIVE_ROOTS</var></p>
                  </div>

                  <div id="max-negative-roots" data-type="max-positive-roots" data-weight="2">
                      <p class="question">What is the maximum number of negative roots <code>f(x)</code> can have?</p>
                      <p class="solution" data-type="text"><var>MAX_NEGATIVE_ROOTS</var></p>
                  </div>

                  <div id="min-complex-roots" data-type="max-positive-roots" data-weight="1">
                      <p class="question">What is the minimum number of complex roots <code>f(x)</code> can have?</p>
                      <p class="solution" data-type="text"><var>MIN_COMPLEX_ROOTS</var></p>
                  </div>
              </div>
              <div class="hints">
                  <p>A negative leading coefficient does not count as a sign change.</p>
                  <p>A negative root of <code>p(x)</code> is a positive root of <code>p(-x)</code>.</p>
                  <p>A root is either real or complex.</p>
                  <p>A real root is positive, negative, or zero.</p>
                  <p><code>f(x)</code> has 0 as a root <var>ZERO_ROOT_MULTIPLICITY</var> time(s), at most <var>MAX_POSITIVE_ROOTS</var> positive root(s), at most <var>MAX_NEGATIVE_ROOTS</var> negative root(s), and at least <var>MIN_COMPLEX_ROOTS</var> complex root(s).</p>
              </div>
          </div>
      </body>
  </html>
